version: '3'
services:
  whatsupdocker:
    image: fmartinou/whats-up-docker
    container_name: wud
    restart: unless-stopped
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
  #  ports:
  #   - 3000:3000
    environment:
      - WUD_WATCHER_LOCAL_WATCHALL=true
      - WUD_WATCHER_MYREMOTEHOST_HOST=192.168.1.103, 192.168.1.106
    networks:
       proxy:
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.whats-up-docker.entrypoints=http"
      - "traefik.http.routers.whats-up-docker.rule=Host(`wud.domain.io.vn`)"
      - "traefik.http.middlewares.whats-up-docker-https-redirect.redirectscheme.scheme=https"
      - "traefik.http.routers.whats-up-docker.middlewares=whats-up-docker-https-redirect"
      - "traefik.http.routers.whats-up-docker-secure.entrypoints=https"
      - "traefik.http.routers.whats-up-docker-secure.rule=Host(`wud.domain.io.vn`)"
      - "traefik.http.routers.whats-up-docker-secure.tls=true"
      - "traefik.http.routers.whats-up-docker-secure.service=whats-up-docker"
      - "traefik.http.services.whats-up-docker.loadbalancer.server.port=3000"
      - "traefik.docker.network=proxy"
    security_opt:
      - no-new-privileges:true

networks:
  proxy:
    external: true
